<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DigitMatchStars Proâ„¢ - Official Deriv Trading Bot</title>
    <meta name="description" content="Official Deriv trading bot with instant tick execution. Connect via OAuth.">

    <!-- UI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        * { font-family: 'Inter', sans-serif; }
        body {
            background: linear-gradient(135deg, #0a0f1f, #0f172a);
            color: #f8fafc;
            min-height: 100vh;
        }
        .gradient-text {
            background: linear-gradient(135deg, #10b981, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .glass-card {
            background: rgba(255,255,255,0.04);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
        }
        .btn-primary {
            background: linear-gradient(135deg,#10b981,#059669);
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
        }
        .btn-oauth {
            background: linear-gradient(135deg,#8b5cf6,#7c3aed);
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
        }
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: linear-gradient(135deg,#0f172a,#0a0f1f);
            padding: 40px;
            border-radius: 24px;
            max-width: 500px;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .auth-step { display: none; }
        .auth-step.active { display: block; }
    </style>

    <!-- ================= ðŸ” OAUTH HANDLER (DUAL ACCOUNT) ================= -->
    <script>
    (function () {
        const params = new URLSearchParams(window.location.search);

        // REAL account
        const acct1  = params.get('acct1');
        const token1 = params.get('token1');

        // DEMO account
        const acct2  = params.get('acct2');
        const token2 = params.get('token2');

        let hasAuth = false;

        if (acct1 && token1) {
            localStorage.setItem('derivTokenReal', token1);
            localStorage.setItem('derivRealAccount', acct1);
            hasAuth = true;
        }

        if (acct2 && token2) {
            localStorage.setItem('derivTokenDemo', token2);
            localStorage.setItem('derivDemoAccount', acct2);
            hasAuth = true;
        }

        if (hasAuth) {
            // Prefer DEMO if available
            if (acct2 && token2) {
                localStorage.setItem('selectedAccountMode', 'DEMO');
                localStorage.setItem('derivAccount', acct2);
            } else {
                localStorage.setItem('selectedAccountMode', 'REAL');
                localStorage.setItem('derivAccount', acct1);
            }

            localStorage.setItem('auth_method', 'oauth');
            localStorage.setItem('auto_open_bot', 'true');

            // Clean redirect to bot
            window.location.replace('bot-obfuscated.html?oauth_redirect=1&auto_open=1');
            return;
        }

        // Auto-reconnect if tokens already exist
        if (
            localStorage.getItem('derivTokenDemo') ||
            localStorage.getItem('derivTokenReal')
        ) {
            setTimeout(() => {
                window.location.href = 'bot-obfuscated.html?auto_reconnect=1';
            }, 600);
        }
    })();
    </script>
</head>

<body>

<!-- NAV -->
<nav class="glass-card fixed top-6 left-1/2 -translate-x-1/2 w-[95%] max-w-6xl px-6 py-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-green-500 to-blue-600 flex items-center justify-center">
            <i class="fas fa-robot text-white text-xl"></i>
        </div>
        <span class="text-2xl font-bold gradient-text">DigitMatchStars Proâ„¢</span>
    </div>
    <button onclick="openModal()" class="btn-primary">Start Trading</button>
</nav>

<!-- HERO -->
<section class="pt-44 pb-24 text-center px-6">
    <h1 class="text-6xl md:text-7xl font-bold mb-6">
        <span class="gradient-text">Instant Tick</span><br>DigitMatch Bot
    </h1>
    <button onclick="openModal()" class="btn-primary text-lg px-12 py-5">
        Connect via OAuth
    </button>
</section>

<!-- MODAL -->
<div id="authModal" class="modal">
    <div class="modal-content">
        <button onclick="closeModal()" class="float-right text-white text-2xl">&times;</button>

        <div id="choiceStep" class="auth-step active">
            <h2 class="text-3xl font-bold mb-6 text-center">Connect</h2>
            <div class="space-y-4">
                <div class="glass-card p-6 cursor-pointer" onclick="startOAuth()">
                    <h3 class="font-bold">Connect via OAuth</h3>
                    <p class="text-sm text-gray-400">Existing Deriv account</p>
                </div>
                <div class="glass-card p-6 cursor-pointer" onclick="createAccount()">
                    <h3 class="font-bold">Need an account?</h3>
                    <p class="text-sm text-gray-400">Sign up with affiliate link</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const CONFIG = {
    APP_ID: 117144,
    REDIRECT_URI: window.location.origin + window.location.pathname,
    AFFILIATE_URL: "https://track.deriv.com/_0rfpRaHuZeFMjdsyM5hasGNd7ZgqdRLk/1/"
};

function openModal() {
    document.getElementById('authModal').style.display = 'flex';
}
function closeModal() {
    document.getElementById('authModal').style.display = 'none';
}

function startOAuth() {
    const params = new URLSearchParams({
        app_id: CONFIG.APP_ID,
        response_type: 'token',
        redirect_uri: CONFIG.REDIRECT_URI,
        scope: 'read,trade,trading_information'
    });
    window.location.href = `https://oauth.deriv.com/oauth2/authorize?${params.toString()}`;
}

function createAccount() {
    window.open(CONFIG.AFFILIATE_URL, '_blank');
}
</script>

</body>
</html>
